# JVM核心机制

- 类加载全过程

  - 加载：将class文件的字节码加载到内存中，将字节码加载到方法区中，在方法区中形成二进制的运行时的数据结构，在堆中生成代表这个类的Class对象——作为方法区类数据的访问入口

  - 链接：将java类的字节码合并到JVM的运行状态中

    - 验证：确保加载的类信息符合JVM规范，没有安全方面的问题
    - 准备：正式为类变量分配内存并设置初始值（默认初值 int为0）
    - 解析：将常量池中的符号引用替换为直接引用（总经理找市长==》1米处的人找10米处的人）

  - 初始化

    - 执行类构造器<clinit>()方法的过程，由编译器自动手机所有类变量的赋值动作和静态语句块中的语句合并产生的

    - 初始化类时，若父类没有被初始化，则先初始化父类

    - 虚拟机保证该方法线程安全

    - 访问一个类的静态域（静态变量 field），只有真正说明这个域的类会被初始化

    ![image-20200616135258288](C:\Users\82305\AppData\Roaming\Typora\typora-user-images\image-20200616135258288.png)

    ![image-20200616140148285](C:\Users\82305\AppData\Roaming\Typora\typora-user-images\image-20200616140148285.png)

    

- 