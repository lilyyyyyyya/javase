# 面向对象--进阶

- 面向对象三大特征：继承、多态、封装

- 继承：extends 子类是父类的扩展，子类拥有父类的一切，但不见得子类能用。实现了代码的重用。

  - Java中只有一个直接父类，即单继承。
  - 子类继承父类，可以得到父类中除构造方法外的一切，但不一定能访问（private）
  - 若没有继承，则默认继承java.lang.Object
  - 使用Ctrl+t查看继承结构
  - instanceof二元运算符，左边是对象，右边是类，判断对象是否是该类或其子类创建的对象

- 重载：overload，一个类中有多个同名方法

- 重写：override：子类重写父类的方法，用自身的行为替换父类的行为，优先调用自身的行为

  - 方法名和形参列表相同
  - 返回值类型和声明异常类型：子类小于等于父类（父类Person子类Student）
  - 访问权限：子类大于等于父类

- “==”比较双方是否相同，基本类型比较值，引用类型比较地址，解决方法：重写/使用equals

- super：访问父类中被子类覆盖的方法或属性 `super.rest();super.id;`

- new子类的时候实际上先调用父类构造器，因为构造器中有一句默认的 `super();`

- 封装：追求“高内聚，低耦合”，细节自己完成，不允许外部干涉

  - 优点：提高代码安全性和复用性。提高可维护性，便于扩展和协作

  - 通过访问控制符实现封装

    | 修饰符    | 同一个类 | 同一个包 | 子类 | 所有类 |
    | --------- | -------- | -------- | ---- | ------ |
    | private   | √        |          |      |        |
    | default   | √        | √        |      |        |
    | protected | √        | √        | √    |        |
    | public    | √        | √        | √    | √      |

  - 工作准则：属性全部private，提供相应的set和get方法，一般的方法都是public

- 多态：同一个方法调用，对象不同可能会有不同的行为

  - 多态是方法的多态
  - 防止出现过多的重载方法
  - 必要条件：继承、方法重写、父类引用指向子类对象

- 对象的转型

  - Animal d = new Dog();  自动向上转型，d是Animal类型
  - Dog d2 = (Dog)d; 向下转型，强制类型转换
  - ClassCastException：类型转换错误，例如猫不能转成狗

- final关键字

  - final 修饰变量：该变量为常量，只能赋一次值
  - final 修饰方法：不能被子类重写，但是可以被重载
  - final 修饰类：不能被继承
  - final 修饰引用类型：引用的对象不变，但是对象的内容可以变

- 抽象类和抽象方法

  - 抽象方法：用abstract修饰的方法，没有方法体，只有声明。父类没有实现，非虚子类必须实现，严格限制了子类的设计
  - 包含抽象方法的类就是抽象类，抽象类不能实例化，可以包含普通方法等，只能被继承。意义：为子类提供统一的、规范的模板

- 接口

  - 接口中不提供任何方法的实现，不需要写abstract

  - 接口可以实现多继承，只能对常量和方法进行定义，不能定义变量

    ```java
    interface C extends A,B
    ```

  - 接口中常量默认public static final，方法默认public abstract

  - 子类通过implements来实现，实现类可以实现多个父接口

- 内部类

  - 非静态内部类：生成两个不同的class文件，可以直接使用外部类的属性，外部类名.this.属性名访问，外部类不能访问内部类的成员，普通内部类不能有static修饰的成员

    ```java
    class inner{
        public void show(){
            System.out.println(Outer.this.age);
        }
    }
    Outer.Inner inner=new Outer().new Inner();//非静态内部类创建方式
    ```

  - 静态内部类：可以认为是外部类的一个成员，不依赖于外部类存在

    ```java
    static class inner{
        public void show(){
            System.out.println(Outer.this.age);
        }
    }
    Outer.Inner inner=new Outer().Inner();//静态内部类创建方式
    ```

  - 匿名内部类：适合只需要使用一次的类，比如监听操作。没有访问修饰符，没有构造方法

  - 局部内部类：类中方法定义的类，作用域只限于此方法

